<!-- Wrapper -->
<div class="wrapper">
  <!-- Header -->
  <app-header></app-header>
  <!-- End header -->

  <!-- Navigation -->
  <app-sidemenu></app-sidemenu>
  <!-- End navigation -->

  <!-- Main content -->
  <section class="content">
    <div class="container-fluid">
      <div *ngIf="form_step == 1">
        <form class="form-horizontal" autocomplete="off">
          <div class="row">
            <div class="col-md-12">
              <div class="panel panel-filled">
                <div class="panel-heading ">
                  <div class="panel-title">Section 1 - General Work Details</div>
                </div>
                <div class="panel-heading ">
                  <div class="panel-title">Request PTW Form</div>
                </div>
                <div class="panel-body">
                  <div class="row margin-bottom-10">
                    <div class=" col-md-6">
                      <label class="field-required" for="title">PTW Title</label>
                    </div>
                    <div class=" col-md-4">
                      <input type="text" class="form-control" name="ptwtitle" placeholder="Enter PTW Title" />
                    </div>
                    <div class=" col-md-6 margin-top-15">
                      <label class="field-required" for="work">Is the work an Emergency / Result of an Emergency / will result in an emergency if delayed</label>
                    </div>
                    <div class="col-md-6 margin-top-15">
                      <div class="radio radio-primary">
                        <input type="radio" [(ngModel)]="emergency" id="p-id-yes" name="emergency" value="Yes">
                        <label for="p-id-yes">Yes</label>
                      </div>
                      <div class="radio radio-primary">
                        <input type="radio" [(ngModel)]="emergency" id="p-id-no" name="emergency" value="No">
                        <label for="p-id-no">No </label>
                      </div>
                    </div>
                  </div>
                  <div class="row margin-bottom-10">
                    <div class="col-md-6 margin-top-10">
                      <label class="field-required" for="high">Is the work High hazword work</label>
                    </div>
                    <div class="col-md-4 margin-top-10">
                      <div class="radio radio-primary">
                        <input type="radio" [(ngModel)]="high_hazard_work" id="hazword-yes" name="high_hazard_work" value="Yes">
                        <label for="hazword-yes">Yes</label>
                      </div>
                      <div class="radio radio-primary">
                        <input type="radio" [(ngModel)]="high_hazard_work" id="hazword-no" name="high_hazard_work" value="No">
                        <label for="hazword-no">No </label>
                      </div>
                    </div>
                    <div class="col-md-6 margin-top-15">
                      <label class="field-required" for="order">Work Order Number</label>
                    </div>
                    <div class="col-md-4 margin-top-15">
                      <input type="text" class="form-control" [(ngModel)]="work_order" name="work_order" placeholder="Enter Order Number" />
                    </div>
                  </div>
                  <div class="row margin-bottom-10">
                    <div class="col-md-6 margin-top-15">
                      <label class="field-required" for="typework">Select Type of work</label>
                    </div>
                    <div class="col-md-4 margin-top-15">
                      <!-- <div class="btn-group" role="group" aria-label="Basic example">
                        <input type="radio" name="type_of_permit" [(ngModel)]="type_of_permit" value="1" class="btn btn-outline-secondary" style="width: 150px">Hot</button>
                        <input type="radio" name="type_of_permit" [(ngModel)]="type_of_permit" value="2" class="btn btn-outline-secondary" style="width: 150px">Cold</button>
                      </div> -->
                      <div class="btn-group" role="group" aria-label="Basic example">
                        <input type="button" name="type_of_permit" [(ngModel)]="type_of_permit" class="btn btn-outline-secondary " style="width: 150px"
                          value="1">
                        <input type="button" name="type_of_permit" [(ngModel)]="type_of_permit" class="btn btn-outline-secondary" style="width: 150px"
                          value="2">
                      </div>
                    </div>
                    <div class="col-md-6 margin-top-15">
                      <label class="field-required" for="workinvolves">Work also involves</label>
                    </div>
                    <div class="col-md-6 margin-top-15">
                      <div class="checkbox-wrap inline" *ngFor="let work of work_involve_data">
                        <input type="checkbox" [(ngModel)]="work_involve_data_selected" value="work.id" name="work.name" id="workinvolves.name" />
                        <label>{{work.name}}</label>
                      </div>

                      <!-- <tr *ngFor="let hero of heroes">
                        <td>{{hero.name}}</td>
                    </tr> -->
                      <!-- <div class="checkbox-wrap inline margin-left-20">
                        <input type="checkbox" name="testing" id="testing" />
                        <label for="testing">Testing & Inspection</label>
                      </div>
                      <br>
                      <div class="margin-top-10">
                        <div class="checkbox-wrap inline">
                          <input type="checkbox" name="confined" id="confined" />
                          <label for="confined">Confined space entry </label>
                        </div> &nbsp;
                        <div class="checkbox-wrap inline">
                          <input type="checkbox" name="hazmat" id="hazmat" />
                          <label for="hazmat">HAZMAT handling</label>
                        </div>
                      </div>
                      <div class="margin-top-10">
                        <div class="checkbox-wrap inline">
                          <input type="checkbox" name="electrical" id="electrical" />
                          <label for="electrical">Electrical work </label>
                        </div>
                        <div class="checkbox-wrap inline margin-left-45">
                          <input type="checkbox" name="heavy" id="heavy" />
                          <label for="heavy">Heavy eqpt movement</label>
                        </div>
                      </div> -->
                    </div>
                  </div>

                  <div class="row margin-top-25">
                    <div class="col-md-6">
                      <label class="field-required" for="requires">Work Requires Certificates</label>
                    </div>
                    <div class="col-md-6">
                      <!-- <div class="checkbox-wrap inline" *ngFor="let item of work_require_list_data; let i= index">
                        <input type="checkbox" [(ngModel)]="work_require_list_data[i].id" name="certificate{{item.name}}" id="certificate{{item.name}}" />
                        <label for="isolation">{{item.name}}</label>
                      </div> -->

                      <div class="checkbox-wrap inline ml-3 mt-3" *ngFor="let item of work_require_list_data; let i= index">
                        <input type="checkbox" [(ngModel)]="work_require_list_data[i].checked" name="working{{item.name}}" id="working{{item.name}}"
                        />
                        <label for="working{{item.name}}" style="width: 200px;">{{item.name}}</label>
                      </div>



                      <!-- <div class="checkbox-wrap inline margin-left-20">
                        <input type="checkbox" name="inspec" id="inspec" />
                        <label for="inspec">Testing & Inspection cert</label>
                      </div> -->
                    </div>
                    <div class="col-md-6 mt-1">
                    </div>
                    <!-- <div class="col-md-6 mt-1">
                      <div class="checkbox-wrap inline">
                        <input type="checkbox" name="radiation" id="radiation" />
                        <label for="radiation">Radiation certificate </label>
                      </div>
                      <div class="checkbox-wrap inline ml-4">
                        <input type="checkbox" name="scaff" id="scaff" />
                        <label for="scaff">Scaffolding certificate</label>
                      </div>
                    </div> -->
                    <!-- <div class="col-md-6 mt-3">
                    </div> -->
                    <!-- <div class="col-md-6 mt-3">
                      <div class="checkbox-wrap inline">
                        <input type="checkbox" name="diving" id="diving" />
                        <label for="diving">Diving certificate</label>
                      </div>
                      <div class="checkbox-wrap inline ml-5">
                        <input type="checkbox" name="eqpt" id="eqpt" />
                        <label for="eqpt">Heavy eqpt movement cert</label>
                      </div>
                    </div> -->

                  </div>
                  <div class="row margin-top-20">
                    <div class="col-md-6">
                      <label class="field-required" for="description"> Description of the work</label>
                    </div>
                    <div class="col-md-4">
                      <textarea name="discription" placeholder="Enter remarks" [(ngModel)]="discription" class="form-control" id="reuncheckremarks"
                        rows="2"></textarea>
                    </div>
                    <div class="col-md-6 mt-4">
                      <label class="field-required" for="job">Job location</label>
                    </div>
                    <div class="col-md-4 mt-4">
                      <select class="form-control" [(ngModel)]="job_location_selected" name="priority">
                        <option selected disabled value="">Select Prioty</option>
                        <option value="{{item.jobloc_id}}" *ngFor="let item of job_location_list_data">{{item.locationname}}</option>
                        <!-- <option value="normal">Normal</option> -->
                      </select>
                    </div>
                  </div>
                  <div class="row margin-top-10 margin-bottom-20">
                    <div class="col-md-6">
                      <label class="field-required" for="permitfrom">
                        Permit required - From -- To</label>
                    </div>
                    <div class="col-md-4">
                      <p-calendar class="prime-icon-cal" [(ngModel)]="from_date" dateFormat="dd-mm-yy" [showIcon]="true" name="from_date" [showTime]="true">
                      </p-calendar> &nbsp;
                      <p-calendar class="prime-icon-cal" [(ngModel)]="to_date" dateFormat="dd-mm-yy" [showIcon]="true" name="to_date" [showTime]="true">
                      </p-calendar>
                    </div>
                  </div>
                  <div class="col-md-12 text-right">
                    <button type="submit" (click)="stepgo(2)" class="btn btn-info btn-outline btn-rounded margin-right-5">
                      <i class="fa fa-plus"></i> Add to Manpower
                    </button>
                    <button type="button" (click)="stepgo(3)" class="btn btn-info btn-rounded margin-right-5">
                      Next
                      <i class="fas fa-chevron-right"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <!-- step 2 -->

      <div *ngIf="form_step == 2">

        <div class="panel panel-filled">
          <div class="panel-body">Trades / Roles / Manpower
            <div class="row" *ngFor="let item of role; let i=index">
              <div class="col-md-6 mt-3" id="buttons">
                <ul class="list-group">
                  <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{item.role}}
                    <span class="badge badge-primary badge-pill">{{count[i]}}</span>
                  </li>
                </ul>
              </div>


              <!-- <div class="col-md-2 margin-top-15">
                <label class="field-required" for="Upload_type">Trades / Roles / Manpower</label>
              </div>
              <div class=" col-md-4 margin-top-15">
                <select name="Upload_type" class="form-control" [(ngModel)]="Upload_type">
                  <option value="{{ item.ptw_doc_id }}" *ngFor="let item of doctype">{{ item.doc_type_name }}</option>
                </select>
              </div> -->



              <div class="col-md-6 mt-5">
                <button class="btn btn-outline-secondary" type="button" (click)="onAdd(i)">+</button>
                <button class="btn btn-outline-secondary"  type="button" (click)="onSub(i)">-</button>
              </div>
            </div>

            <div class="row" *ngFor="let item of roles; let i=index">
              <div class="col-md-6 mt-3">
                PTW Specific roles
                <ul class="list-group">
                  <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{item.role}}
                    <span class="badge badge-primary badge-pill">{{coun[i]}}</span>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 mt-5">
                <button class="btn btn-outline-secondary" type="button" (click)="onAdd1(i)">+</button>
                <button class="btn btn-outline-secondary" type="button" (click)="onSub1(i)">-</button>
              </div>
            </div>
            <div class="row">
              <div class="col-md-3 margin-top-15">
                <label class="field-required" for="Upload_type">Estimated total No. of manpower to be deployed :</label>
              </div>
              <div class="col-md-2 margin-top-15">
                <input type="text" class="form-control" name="estimated" id="Upload_type">
              </div>
            </div>



            <div class="row mt-5">
              <div class="col-md-6">
                <label class="field-required" for="Upload_type">Plant Equipment & Tools</label>
                <input type="text" class="form-control" placeholder="Add Plant Equipment & Tools" name="plant">
              </div>
              <div class="col-md-2 margin-top-25">
                <button class="btn btn-info">Add</button>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mt-3">
                <ul class="list-group">
                  <li class="list-group-item d-flex justify-content-between align-items-center">
                    Hello
                    <!-- <span class="badge badge-primary badge-pill">{{count}}</span> -->
                  </li>
                </ul>
              </div>
              <button class="btn btn-outline-secondary h-25 mt-3" type="button" (click)="onAdd()">+</button>
              <button class="btn btn-outline-secondary margin-left-5 h-25 mt-3" type="button" (click)="onSub()">-</button>
            </div>
            <div class="row">
              <div class="col-md-3 margin-top-15">
                <label class="field-required" for="Upload_type">Estimated total No. of equipment to be deployed :</label>
              </div>
              <div class="col-md-2 margin-top-15">
                <input type="text" class="form-control" name="estimated">
              </div>
            </div>



            <div class="row mt-5">
              <div class="col-md-6 mt-3">
                <label class="field-required" for="Upload_type">Materials, Chemicals & Substances</label>
                <input type="text" class="form-control" placeholder="Add Materials, Chemicals & Substances" name="material">
              </div>
              <div class="col-md-2 margin-top-33">
                <button class="btn btn-info">Add</button>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mt-3">
                <ul class="list-group">
                  <li class="list-group-item d-flex justify-content-between align-items-center">
                    Hello
                    <!-- <span class="badge badge-primary badge-pill">{{count}}</span> -->
                  </li>
                </ul>
              </div>
              <button class="btn btn-outline-secondary h-25 mt-3" type="button" (click)="onAdd()">+</button>
              <button class="btn btn-outline-secondary margin-left-5 h-25 mt-3" type="button" (click)="onSub()">-</button>
            </div>
            <div class="row">
              <div class="col-md-3 margin-top-15">
                <label class="field-required" for="Upload_type">Estimated total No. of MCS to be deployed :</label>
              </div>
              <div class="col-md-2 margin-top-15">
                <input type="text" class="form-control" name="estimated">
              </div>
            </div>
          </div>
          <div class="panel-footer">
            <div class="col-md-12 text-right mb-3">
              <button type="button" (click)="stepgo(3)" class="btn btn-info btn-rounded margin-right-5">
                Next
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
          </div>
        </div>
      </div>



      <!-- step 3 upload -->
      <div *ngIf="form_step == 3">

        <div class="row">
          <div class="col-md-12">
            <div class="panel panel-filled">
              <div class="panel-heading ">
                <div class="panel-title">File Upload PTW</div>
              </div>
              <div class="panel-body">
                <div class="row mb-5">
                  <div class="col-md-2 margin-top-15">
                    <label class="field-required" for="Upload_type">Type of Doc Uploading</label>
                  </div>
                  <div class=" col-md-4 margin-top-15">
                    <select name="Upload_type" class="form-control" [(ngModel)]="Upload_type">
                      <option value="{{ item.ptw_doc_id }}" *ngFor="let item of doctype">{{ item.doc_type_name }}</option>
                    </select>
                  </div>
                </div>
                <form [formGroup]="myForm" autocomplete="off">
                  <div class="row margin-bottom-10" formArrayName="formArray">
                    <div class="col-md-2">
                      <label class="field-required" for="RelevantimgInp">Upload Document</label>
                    </div>
                    <div *ngFor="let language of myForm.controls.formArray.controls; let i=index">
                      <div class="col-md-12" [formGroupName]="i">
                        <input type="file" id="RelevantimgInp" class="file-input-custom form-control" placeholder="Upload file" formControlName="file"
                          name="file" (change)="selectFile($event, 'formArray')" accept=".jpg,.png,.pdf,.mp4,.MP4" />
                        <a class="btn btn-white tool-tip" (click)='addformArray()'>
                          <i class="fas fa-plus"></i>
                          <span class="tooltip-inner-text">Add</span>
                        </a>
                        <a class="btn btn-white tool-tip" (click)="removeformArray(i)" *ngIf="myForm.controls.formArray.controls.length > 1">
                          <i class="fas fa-trash-alt"></i>
                          <span class="tooltip-inner-text">Delete</span>
                        </a>
                      </div>
                    </div>
                  </div>
                </form>
                <div class="row margin-bottom-10">
                  <div class="col-md-2 margin-top-15">
                    <label class="field-required" for="Reference">Reference Link</label>
                  </div>
                  <div class=" col-md-5 margin-top-15">
                    <input type="text" id="Reference" class="form-control" [(ngModel)]="reference_link" placeholder="Reference Link" name="reference"
                    />
                  </div>
                </div>
                <div class="col-md-12 text-right">
                  <button type="submit" (click)="uploadFiles()" class="btn btn-info btn-outline btn-rounded margin-right-5">
                    <i class="fa fa-save"></i> Save
                  </button>
                  <button type="button" (click)="goPPMPDetails()" class="btn btn-info btn-rounded margin-right-5">
                    Next
                    <i class="fas fa-chevron-right"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>


    </div>
  </section>
</div>